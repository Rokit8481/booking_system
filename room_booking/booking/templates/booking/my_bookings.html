{% extends 'base.html' %}

{% block title %}–ú–æ—ó –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è{% endblock %}

{% block content %}
  <div class="container mt-4">
    <h2 class="mb-4">–ë—Ä–æ–Ω—é–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞: {{user.username}}</h2>
    <p><strong>–í–∞—à–∞ –ø–æ—à—Ç–∞:</strong> {{ user.email }}</p>
    <p><strong>–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è:</strong> {{ user.birth_date }}</p>

    <h4>–ú–∞–π–±—É—Ç–Ω—ñ:</h4>
    {% if future_bookings %}
      <ul class="list-group mb-4">
        {% for booking in future_bookings %}
        <li class="list-group-item">
          –°—Ç–≤–æ—Ä–µ–Ω–æ –≤ <strong>{{ booking.created_at|date:"d.m.Y H:i" }}</strong>
          <div class="d-flex justify-content-between mb-2">
            <div>
              –ö—ñ–º–Ω–∞—Ç–∞ ‚Ññ{{ booking.room.number }}: <strong>–∑ {{ booking.start_time|date:"d.m.Y H:i" }} –¥–æ {{ booking.end_time|date:"d.m.Y H:i" }}</strong>
            </div>
            <div>
              –°—Ç–∞—Ç—É—Å –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è: 
              <strong>{% with booking.get_status_display as status %}
                {% if status == '–û—á—ñ–∫—É—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è' %}
                <span class="text-warning">üü°{{ status }}</span>
                {% elif status == '–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ' %}
                  <span class="text-success">üü¢{{ status }}</span>
                {% else %}
                  <span class="text-danger">üî¥{{ status }}</span>
                {% endif %}
              {% endwith %}
              </strong>
            </div>
          </div>
        </li>
          <div class="d-flex justify-content-between mb-2">
            <div>
              <a href="{% url 'edit_booking' booking.pk %}" class="btn btn-outline-success btn-sm">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è</a>
            </div>
            <div>
              <form action="{% url 'cancel_booking' booking.pk %}" method="POST">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-success btn-sm">–°–∫–∞—Å—É–≤–∞—Ç–∏ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è</button>
              </form>
            </div>
          </div>
        {% endfor %}
      </ul>
    {% else %}
      <p>–ù–µ–º–∞—î –º–∞–π–±—É—Ç–Ω—ñ—Ö –±—Ä–æ–Ω—é–≤–∞–Ω—å.</p>
    {% endif %}

    <h4>–ü–æ—Ç–æ—á–Ω—ñ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è:</h4>
    {% if active_bookings %}
      <ul class="list-group mb-4">
        {% for booking in active_bookings %}
          <li class="list-group-item">
            –°—Ç–≤–æ—Ä–µ–Ω–æ –≤ <strong>{{ booking.created_at|date:"d.m.Y H:i" }}</strong>
            <div class="d-flex justify-content-between mb-2">
              <div>
                –ö—ñ–º–Ω–∞—Ç–∞ ‚Ññ{{ booking.room.number }}: <strong>–∑ {{ booking.start_time|date:"d.m.Y H:i" }} –¥–æ {{ booking.end_time|date:"d.m.Y H:i" }}</strong>
              </div>
              <div>
                –°—Ç–∞—Ç—É—Å –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è: 
                <strong>{% with booking.get_status_display as status %}
                  {% if status == '–û—á—ñ–∫—É—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è' %}
                  <span class="text-warning">üü°{{ status }}
                  {% elif status == '–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ' %}
                    <span class="text-success">üü¢{{ status }}</span>
                  {% else %}
                    <span class="text-danger">üî¥{{ status }}</span>
                  {% endif %}
                {% endwith %}
                </strong>
              </div>
            </div>
          </li>
          <div class="d-flex justify-content-between mb-2">
            <div>
              <a href="{% url 'edit_booking' booking.pk %}" class="btn btn-outline-success btn-sm">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è</a>
            </div>
            <div>
              <form action="{% url 'cancel_booking' booking.pk %}" method="POST">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-success btn-sm">–°–∫–∞—Å—É–≤–∞—Ç–∏ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è</button>
              </form>
            </div>
          </div>
        {% endfor %}
      </ul>
    {% else %}
      <p>–ù–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–∏—Ö –±—Ä–æ–Ω—é–≤–∞–Ω—å.</p>
    {% endif %}


    <h4>–ú–∏–Ω—É–ª—ñ:</h4>
    {% if past_bookings %}
      <ul class="list-group">
        {% for booking in past_bookings %}
        <li class="list-group-item">
          –°—Ç–≤–æ—Ä–µ–Ω–æ –≤ <strong>{{ booking.created_at|date:"d.m.Y H:i" }}</strong>
          <div class="d-flex justify-content-between mb-2">
            <div>
              –ö—ñ–º–Ω–∞—Ç–∞ ‚Ññ{{ booking.room.number }}: <strong>–∑ {{ booking.start_time|date:"d.m.Y H:i" }} –¥–æ {{ booking.end_time|date:"d.m.Y H:i" }}</strong>
            </div>
            <div>
              –°—Ç–∞—Ç—É—Å –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è: 
              <strong>{% with booking.get_status_display as status %}
                {% if status == '–û—á—ñ–∫—É—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è' %}
                <span class="text-warning">üü°{{ status }}
                {% elif status == '–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ' %}
                  <span class="text-success">üü¢{{ status }}</span>
                {% else %}
                  <span class="text-danger">üî¥{{ status }}</span>
                {% endif %}
              {% endwith %}
              </strong>
            </div>
          </div>
        </li>
          <div class="d-flex justify-content-between mb-2">
            <div>
              <form action="{% url 'cancel_booking' booking.pk %}" method="POST">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-success btn-sm">–í–∏–¥–∞–ª–∏—Ç–∏ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è</button>
            </div>
          </div>
        {% endfor %}
      </ul>
    {% else %}
      <p>–ù–µ–º–∞—î –º–∏–Ω—É–ª–∏—Ö –±—Ä–æ–Ω—é–≤–∞–Ω—å.</p>
    {% endif %}
  </div>
{% endblock %}